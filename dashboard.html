<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlphaJournal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 0;
  font-family: "Inter", sans-serif;
  background-color: #0e0e0e;
  color: #f1f1f1;
}
header {
  padding: 25px 40px;
  border-bottom: 1px solid #1f1f1f;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
h1 {
  font-size: 2.2em;
  font-weight: 600;
  color: #00E8FF;
  letter-spacing: 1px;
}
button {
  background-color: #00E8FF;
  border: none;
  padding: 10px 20px;
  color: #000;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}
button:hover {
  background-color: #00bcd4;
}
main {
  padding: 40px;
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 40px;
}
section {
  background-color: #161616;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.4);
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  padding: 10px 8px;
  text-align: left;
  border-bottom: 1px solid #222;
}
th {
  color: #aaa;
  font-weight: 500;
}
.win { color: #00ff95; font-weight: 600; }
.loss { color: #ff5555; font-weight: 600; }
.breakeven { color: #9b9b9b; font-weight: 600; }
.summary {
  display: flex;
  justify-content: space-around;
  margin-bottom: 15px;
}
.summary div { text-align: center; }
#calendar { width: 100%; color: #f1f1f1; }
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  margin-top: 15px;
}
.day {
  text-align: center;
  padding: 10px;
  border-radius: 6px;
  background-color: #202020;
}
.day.win { background-color: #008c4a; }
.day.loss { background-color: #a00000; }
.day.breakeven { background-color: #555; }
.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.calendar-header button {
  background: none;
  border: none;
  color: #00E8FF;
  font-size: 1.2em;
  cursor: pointer;
}
canvas { margin-top: 20px; }
.action-btn {
  color: #00E8FF;
  cursor: pointer;
  margin-left: 5px;
}
</style>
</head>
<body>

<header>
  <h1>AlphaJournal</h1>
  <button id="addTradeBtn">‚ûï Adicionar Trade</button>
</header>

<main>
  <section>
    <div class="summary">
      <div>
        <h3>Lucro Total</h3>
        <p id="lucroTotal">R$ 0,00</p>
      </div>
      <div>
        <h3>Winrate</h3>
        <p id="winrate">--%</p>
      </div>
      <div>
        <h3>Trades</h3>
        <p id="trades">0</p>
      </div>
    </div>

    <table>
      <thead>
  <tr>
    <th>Par</th>
    <th>Resultado</th>
    <th>Data</th>
    <th>RR</th>
    <th>Coment√°rio</th>
    <th>Dire√ß√£o</th>
    <th>Imagens</th>
    <th>A√ß√µes</th>
  </tr>
</thead>

      <tbody id="tradeTable"></tbody>
    </table>

    <canvas id="equityChart" height="150"></canvas>
  </section>

  <section id="calendar">
    <div class="calendar-header">
      <button id="prevMonth">‚óÄ</button>
      <h2 id="monthLabel">Calend√°rio</h2>
      <button id="nextMonth">‚ñ∂</button>
    </div>
    <div id="calendarGrid" class="calendar-grid"></div>
  </section>
</main>

<script>
let trades = JSON.parse(localStorage.getItem("trades")) || [];

];

let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();

function renderTable() {
  const tbody = document.getElementById("tradeTable");
  tbody.innerHTML = "";
  let wins = 0, total = 0, sum = 0;

  trades.forEach((t, i) => {
    const tr = document.createElement("tr");
    let cls = t.result > 0 ? "win" : t.result < 0 ? "loss" : "breakeven";
    tr.innerHTML = `
      <td>${t.pair}</td>
      <td class="${cls}">${t.result > 0 ? 'WIN' : t.result < 0 ? 'LOSS' : 'BE'} (${t.result >= 0 ? '+' : ''}US$ ${t.result.toFixed(2)})</td>
      <td>${new Date(t.date).toLocaleDateString("pt-BR")}</td>
      <td>${t.rr}</td>
      <td>${t.comment}</td>
      <td>${t.dir}</td>
      <td>
        <span class="action-btn" onclick="editTrade(${i})">‚úèÔ∏è</span>
        <span class="action-btn" onclick="deleteTrade(${i})">üóëÔ∏è</span>
      </td>
    `;
    tbody.appendChild(tr);
    total++;
    if (t.result > 0) wins++;
    sum += t.result;
  });

  document.getElementById("lucroTotal").textContent = `US$ ${sum.toFixed(2)}`;
  document.getElementById("trades").textContent = total;
  document.getElementById("winrate").textContent = ((wins / total) * 100).toFixed(0) + "%";
  renderEquity();
  renderCalendar();
}

function renderEquity() {
  const ctx = document.getElementById("equityChart").getContext("2d");
  let balance = 0;
  const labels = trades.map(t => new Date(t.date).toLocaleDateString("pt-BR"));
  const data = trades.map(t => (balance += t.result));
  new Chart(ctx, {
    type: "line",
    data: {
      labels,
      datasets: [{
        label: "Equity Curve",
        data,
        borderWidth: 3,
        borderColor: "#00E8FF",
        tension: 0.3,
        fill: true,
        backgroundColor: "rgba(0, 232, 255, 0.1)",
        pointRadius: 5,
        pointBackgroundColor: data.map(v => v >= 0 ? "#00E8FF" : "#FF4E4E")
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { grid: { display: false }, ticks: { color: "#aaa" } },
        y: { ticks: { color: "#aaa" }, grid: { color: "#222" } }
      }
    }
  });
}

function renderCalendar() {
  const grid = document.getElementById("calendarGrid");
  grid.innerHTML = "";
  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  const monthName = new Date(currentYear, currentMonth).toLocaleString("pt-BR", { month: "long", year: "numeric" });
  document.getElementById("monthLabel").textContent = monthName.charAt(0).toUpperCase() + monthName.slice(1);

  for (let i = 1; i <= daysInMonth; i++) {
    const d = document.createElement("div");
    d.classList.add("day");
    const trade = trades.find(t => {
      const td = new Date(t.date);
      return td.getMonth() === currentMonth && td.getDate() === i;
    });
    if (trade) d.classList.add(trade.result > 0 ? "win" : trade.result < 0 ? "loss" : "breakeven");
    d.textContent = i;
    grid.appendChild(d);
  }
}

function editTrade(i) {
  const t = trades[i];
  const result = parseFloat(prompt("Novo resultado:", t.result));
  const comment = prompt("Novo coment√°rio:", t.comment);
  if (!isNaN(result)) trades[i].result = result;
  trades[i].comment = comment;
  renderTable();
}

function deleteTrade(i) {
  if (confirm("Apagar esta trade?")) {
    trades.splice(i, 1);
    renderTable();
  }
}

document.getElementById("addTradeBtn").onclick = () => {
  const pair = prompt("Par (ex: XAUUSD):");
  const result = parseFloat(prompt("Resultado em US$ (ex: -10 ou 30):"));
  const rr = prompt("RR (ex: 1:2.5):");
  const comment = prompt("Coment√°rio:");
  const dir = prompt("Dire√ß√£o (BUY/SELL):");
  const date = prompt("Data (AAAA-MM-DD):", new Date().toISOString().split("T")[0]);
   const img1 = prompt("URL da 1¬™ imagem (deixe vazio se n√£o tiver):");
  const img2 = prompt("URL da 2¬™ imagem (opcional):");
  const imgs = [];
  if (img1) imgs.push(img1);
  if (img2) imgs.push(img2);

  if (pair && !isNaN(result)) {
    trades.push({ pair, result, rr, comment, dir, date, imgs });
    renderTable();
  }
};

document.getElementById("prevMonth").onclick = () => {
  currentMonth--;
  if (currentMonth < 0) { currentMonth = 11; currentYear--; }
  renderCalendar();
};
document.getElementById("nextMonth").onclick = () => {
  currentMonth++;
  if (currentMonth > 11) { currentMonth = 0; currentYear++; }
  renderCalendar();
};

renderTable();
</script>
</body>
</html>
