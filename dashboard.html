<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trading Journal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 0;
  font-family: "Inter", sans-serif;
  background-color: #0e0e0e;
  color: #f1f1f1;
}
header {
  padding: 25px 40px;
  border-bottom: 1px solid #1f1f1f;
}
h1 {
  font-size: 2.2em;
  font-weight: 600;
  color: #fff;
}
main {
  padding: 40px;
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 40px;
}
section {
  background-color: #161616;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.4);
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  padding: 10px 8px;
  text-align: left;
  border-bottom: 1px solid #222;
}
th {
  color: #aaa;
  font-weight: 500;
}
.win { color: #00ff95; font-weight: 600; }
.loss { color: #ff5555; font-weight: 600; }
.summary {
  display: flex;
  justify-content: space-around;
  margin-bottom: 15px;
}
.summary div {
  text-align: center;
}
#calendar {
  width: 100%;
  color: #f1f1f1;
}
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  margin-top: 15px;
}
.day {
  text-align: center;
  padding: 10px;
  border-radius: 6px;
  background-color: #202020;
}
.day.win { background-color: #008c4a; }
.day.loss { background-color: #a00000; }
canvas {
  margin-top: 20px;
}
</style>
</head>
<body>

<header>
  <h1>Trading Journal</h1>
</header>

<main>
  <section>
    <div class="summary">
      <div>
        <h3>Lucro Total</h3>
        <p id="lucroTotal">R$ 0,00</p>
      </div>
      <div>
        <h3>Winrate</h3>
        <p id="winrate">--%</p>
      </div>
      <div>
        <h3>Trades</h3>
        <p id="trades">0</p>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Par</th>
          <th>Resultado</th>
          <th>Data</th>
          <th>RR</th>
          <th>Comentário</th>
          <th>Direção</th>
        </tr>
      </thead>
      <tbody id="tradeTable"></tbody>
    </table>

    <canvas id="equityChart" height="150"></canvas>
  </section>

  <section id="calendar">
    <h2>Calendário</h2>
    <div id="calendarGrid" class="calendar-grid"></div>
  </section>
</main>

<script>
// =================== Dados de exemplo ===================
const trades = [
  { pair: "XAUUSD", result: 36.04, rr: "1:3.17", comment: "Nos Time Frames", dir: "BUY", date: "2025-11-10" },
  { pair: "XAUUSD", result: -10.80, rr: "1:2.80", comment: "Entrada tarde", dir: "BUY", date: "2025-11-13" },
  { pair: "EURUSD", result: 14.50, rr: "1:1.5", comment: "Scalp rápido", dir: "SELL", date: "2025-11-12" }
];

// =================== Funções ===================
function renderTable() {
  const tbody = document.getElementById("tradeTable");
  tbody.innerHTML = "";

  let wins = 0, total = 0, sum = 0;

  trades.forEach(t => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${t.pair}</td>
      <td class="${t.result >= 0 ? 'win' : 'loss'}">${t.result >= 0 ? 'WIN' : 'LOSS'} (${t.result >= 0 ? '+' : ''}US$ ${t.result.toFixed(2)})</td>
      <td>${new Date(t.date).toLocaleDateString("pt-BR")}</td>
      <td>${t.rr}</td>
      <td>${t.comment}</td>
      <td>${t.dir}</td>
    `;
    tbody.appendChild(tr);
    total++;
    if (t.result > 0) wins++;
    sum += t.result;
  });

  document.getElementById("lucroTotal").textContent = `US$ ${sum.toFixed(2)}`;
  document.getElementById("trades").textContent = total;
  document.getElementById("winrate").textContent = ((wins / total) * 100).toFixed(0) + "%";
}

function renderEquity() {
  const ctx = document.getElementById("equityChart").getContext("2d");
  let balance = 0;
  const labels = trades.map(t => new Date(t.date).toLocaleDateString("pt-BR"));
  const data = trades.map(t => (balance += t.result));

  new Chart(ctx, {
    type: "line",
    data: {
      labels,
      datasets: [{
        label: "Equity Curve",
        data,
        borderWidth: 3,
        borderColor: "#00E8FF",
        tension: 0.3,
        fill: true,
        backgroundColor: "rgba(0, 232, 255, 0.1)",
        pointRadius: 5,
        pointBackgroundColor: data.map(v => v >= 0 ? "#00E8FF" : "#FF4E4E")
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { grid: { display: false }, ticks: { color: "#aaa" } },
        y: { ticks: { color: "#aaa" }, grid: { color: "#222" } }
      }
    }
  });
}

function renderCalendar() {
  const grid = document.getElementById("calendarGrid");
  grid.innerHTML = "";
  const daysInMonth = 30;
  for (let i = 1; i <= daysInMonth; i++) {
    const d = document.createElement("div");
    d.classList.add("day");
    const trade = trades.find(t => new Date(t.date).getDate() === i);
    if (trade) d.classList.add(trade.result >= 0 ? "win" : "loss");
    d.textContent = i;
    grid.appendChild(d);
  }
}

// =================== Render ===================
renderTable();
renderEquity();
renderCalendar();
</script>
</body>
</html>
